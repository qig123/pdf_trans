# 10.9 Exercises

10.9 Exercises
**525**

sion analysis, and other “global” code improvements to be applied across calls.
At the same time, in-line expansion generally increases the size of object code.
Exercises C 10.28 and C 10.30 explore similar tradeoffs in the implementation of
multiple inheritance.
Historically, Smalltalk was widely regarded as the purest and most ﬂexible of
the object-oriented languages. Its lack of compile-time type checking, however,
together with its “message-based” model of computation and its need for dy-
namic method lookup, tended to make its implementations rather slow. C++,
with its object-valued variables, default static binding, minimal dynamic checks,
and high-quality compilers, was largely responsible for popularizing object-
oriented programming in the 1990s. Today objects are ubiquitous—in statically
typed, compiled languages like Java and C#; in dynamically typed languages like
Python, Ruby, PHP, and JavaScript; and even in systems based on binary* compo-*
*nents* or human-readable service invocations over the World Wide Web (more on
these in the Bibliographic Notes).
## 10.9

**Exercises**
```
10.1
Some language designers argue that object orientation eliminates the need
for nested subroutines. Do you agree? Why or why not?
10.2
Design a class hierarchy to represent syntax trees for the CFG of Fig-
ure 4.5. Provide a method in each class to return the value of a node.
Provide constructors that play the role of the make_leaf, make_un_op,
and make_bin_op subroutines.
10.3
Repeat the previous exercise, but using a variant record (union) type to
represent syntax tree nodes. Repeat again using type extensions. Com-
pare the three solutions in terms of clarity, abstraction, type safety, and
extensibility.
10.4
Using the C# indexer mechanism, create a hash table class that can be
indexed like an array. (In effect, create a simple version of the System
.Collections.Hashtable container class.) Alternatively, use an over-
loaded version of operator[] to build a similar class in C++.
10.5
In the spirit of Example 10.8, write a double-ended queue (deque) abstrac-
tion (pronounced “deck”), derived from a doubly linked list base class.
10.6
Use templates (generics) to abstract your solutions to the previous two
questions over the type of data in the container.
10.7
Repeat Exercise 10.5 in Python or Ruby.
Write a simple program to
demonstrate that generics are not needed to abstract over types. What
happens if you mix objects of different types in the same deque?
10.8
When using the list class of Example 10.17, the typical C++ programmer
will use a pointer type for generic parameter V, so that list_nodes point
to the elements of the list. An alternative implementation would include
```

```
In all cases, private members of A are inaccessible to methods of B, C,
or D.
Consider the impact of protected and private base classes on dy-
namic method binding. Under what circumstances can a reference to an
object of class B, C, or D be assigned into a variable of type A*?
```

```
(a) Draw a picture of the layout in memory of the object created at line
15. Show all virtual function tables.
(b) Give assembly-level pseudocode for the call to c.val at line 19. You
may assume that the address of c is in register r1 immediately before
the call, and that this same register should be used to pass the hidden
this parameter. You may ignore the need to save and restore registers,
and don’t worry about where to put the return value.
```

