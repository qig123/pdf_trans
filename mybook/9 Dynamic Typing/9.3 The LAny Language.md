# 9.3 The LAny Language

![Figure 9.5 The abstract...](images/page_180_vector_399.png)
*Figure 9.5 The abstract syntax of LAny, extending LÎ» (figure 8.4).*

9.3 The LAny Language

The definition of the abstract syntax of LAny is given in figure 9.5. The (Inject e T) form converts the value produced by expression e of type T into a tagged value. The (Project e T) form either converts the tagged value produced by expression e into a value of type T or halts the program if the type tag does not match T. Note that in both Inject and Project, the type T is restricted to be a flat type (the nonterminal ftype) which simplifies the implementation and complies with the needs for compiling LDyn. The any-vector operators adapt the tuple operations so that they can be applied to a value of type Any. They also generalize the tuple operations in that the index is not restricted to a literal integer in the grammar but is allowed to be any expression. The type predicates such as boolean? expect their argument to produce a tagged value; they return #t if the tag corresponds to the predicate and return #f otherwise.

The type checker for LAny is shown in figure 9.6 and it uses the auxiliary functions presented in figure 9.7. The interpreter for LAny is shown in figure 9.8 and its auxiliary functions are shown in figure 9.9.

```
(define type-check-Lany-class
(class type-check-Llambda-class
(super-new)
(inherit check-type-equal?)
```

![Figure 9.6 Type checker...](images/page_182_vector_617.png)
*Figure 9.6 Type checker for the LAny language.*

![Figure 9.7 Auxiliary methods...](images/page_183_vector_313.png)
*Figure 9.7 Auxiliary methods for type checking LAny.*

![Figure 9.8 Interpreter for...](images/page_184_vector_494.png)
*Figure 9.8 Interpreter for LAny.*

![Figure 9.9 Auxiliary functions...](images/page_185_vector_362.png)
*Figure 9.9 Auxiliary functions for interpreting LAny.*

